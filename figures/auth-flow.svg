<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1008px" preserveAspectRatio="none" style="width:869px;height:1008px;" version="1.1" viewBox="0 0 869 1008" width="869px" zoomAndPan="magnify"><defs><filter height="300%" id="f1brmavwx1yem9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#EEEEEE" height="993.0508" style="stroke: #DDDDDD; stroke-width: 1.0;" width="324.5" x="219.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="348.25" y="16.5684">Textcamp</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="31" x2="31" y1="86.4883" y2="910.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="290.5" x2="290.5" y1="86.4883" y2="910.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="494" x2="494" y1="86.4883" y2="910.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="618" x2="618" y1="86.4883" y2="910.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="769" x2="769" y1="86.4883" y2="910.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="8" y="83.5352">Player</text><ellipse cx="31.5" cy="13" fill="#FEFECE" filter="url(#f1brmavwx1yem9)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M31.5,21 L31.5,48 M18.5,29 L44.5,29 M31.5,48 L18.5,63 M31.5,48 L44.5,63 " fill="none" filter="url(#f1brmavwx1yem9)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="8" y="923.0977">Player</text><ellipse cx="31.5" cy="936.0508" fill="#FEFECE" filter="url(#f1brmavwx1yem9)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M31.5,944.0508 L31.5,971.0508 M18.5,952.0508 L44.5,952.0508 M31.5,971.0508 L18.5,986.0508 M31.5,971.0508 L44.5,986.0508 " fill="none" filter="url(#f1brmavwx1yem9)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#99FF99" filter="url(#f1brmavwx1yem9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="243.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="250.5" y="71.5352">Web Server</text><rect fill="#99FF99" filter="url(#f1brmavwx1yem9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="243.5" y="909.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="250.5" y="930.0977">Web Server</text><rect fill="#99FF99" filter="url(#f1brmavwx1yem9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="47" x="469" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="476" y="71.5352">Core</text><rect fill="#99FF99" filter="url(#f1brmavwx1yem9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="47" x="469" y="909.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="476" y="930.0977">Core</text><rect fill="#FEFECE" filter="url(#f1brmavwx1yem9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="72" x="580" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="587" y="71.5352">AWS SES</text><rect fill="#FEFECE" filter="url(#f1brmavwx1yem9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="72" x="580" y="909.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="587" y="930.0977">AWS SES</text><rect fill="#FEFECE" filter="url(#f1brmavwx1yem9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="706" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="713" y="71.5352">AWS DynamoDB</text><rect fill="#FEFECE" filter="url(#f1brmavwx1yem9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="706" y="909.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="713" y="930.0977">AWS DynamoDB</text><rect fill="#EEEEEE" filter="url(#f1brmavwx1yem9)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="854" x="3" y="117.1436"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="857" y1="117.1436" y2="117.1436"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="857" y1="120.1436" y2="120.1436"/><rect fill="#EEEEEE" filter="url(#f1brmavwx1yem9)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="160" x="350" y="106.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="356" y="123.0566">Registration &amp; Signin</text><polygon fill="#A80036" points="278.5,157.1094,288.5,161.1094,278.5,165.1094,282.5,161.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31.5" x2="284.5" y1="161.1094" y2="161.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="38.5" y="156.3672">GET /</text><polygon fill="#A80036" points="42.5,186.4199,32.5,190.4199,42.5,194.4199,38.5,190.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36.5" x2="289.5" y1="190.4199" y2="190.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="48.5" y="185.6777">200 index.html</text><polygon fill="#A80036" points="278.5,215.7305,288.5,219.7305,278.5,223.7305,282.5,219.7305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31.5" x2="284.5" y1="219.7305" y2="219.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="38.5" y="214.9883">POST /start-auth</text><polygon fill="#A80036" points="482.5,245.041,492.5,249.041,482.5,253.041,486.5,249.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="290.5" x2="488.5" y1="249.041" y2="249.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="297.5" y="244.2988">world.start_auth()</text><polygon fill="#A80036" points="42.5,274.3516,32.5,278.3516,42.5,282.3516,38.5,278.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36.5" x2="289.5" y1="278.3516" y2="278.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="48.5" y="273.6094">302 /?check-email</text><polygon fill="#A80036" points="606,303.6621,616,307.6621,606,311.6621,610,307.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="612" y1="307.6621" y2="307.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="501.5" y="302.9199">OTP Link</text><polygon fill="#A80036" points="42.5,332.9727,32.5,336.9727,42.5,340.9727,38.5,336.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36.5" x2="617" y1="336.9727" y2="336.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="48.5" y="332.2305">Email: OTP Link</text><polygon fill="#A80036" points="278.5,362.2832,288.5,366.2832,278.5,370.2832,282.5,366.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31.5" x2="284.5" y1="366.2832" y2="366.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="38.5" y="361.541">GET /otp</text><polygon fill="#A80036" points="482.5,391.5938,492.5,395.5938,482.5,399.5938,486.5,395.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="290.5" x2="488.5" y1="395.5938" y2="395.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="297.5" y="390.8516">world.authenticate_otp()</text><polygon fill="#A80036" points="757,420.9043,767,424.9043,757,428.9043,761,424.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="763" y1="424.9043" y2="424.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="501.5" y="420.1621">PUT Session Token</text><polygon fill="#A80036" points="505.5,450.2148,495.5,454.2148,505.5,458.2148,501.5,454.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499.5" x2="768" y1="454.2148" y2="454.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="511.5" y="449.4727">OK</text><polygon fill="#A80036" points="301.5,479.5254,291.5,483.5254,301.5,487.5254,297.5,483.5254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="295.5" x2="493.5" y1="483.5254" y2="483.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="307.5" y="478.7832">OK: Session Token</text><polygon fill="#A80036" points="42.5,508.8359,32.5,512.8359,42.5,516.8359,38.5,512.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36.5" x2="289.5" y1="512.8359" y2="512.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="48.5" y="508.0938">OK: Session Cookie + 302 /?welcome</text><rect fill="#EEEEEE" filter="url(#f1brmavwx1yem9)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="854" x="3" y="541.4912"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="857" y1="541.4912" y2="541.4912"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="857" y1="544.4912" y2="544.4912"/><rect fill="#EEEEEE" filter="url(#f1brmavwx1yem9)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="103" x="378.5" y="530.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="384.5" y="547.4043">Session Start</text><polygon fill="#A80036" points="278.5,581.457,288.5,585.457,278.5,589.457,282.5,585.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31.5" x2="284.5" y1="585.457" y2="585.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="38.5" y="580.7148">GET / + Session Cookie</text><polygon fill="#A80036" points="482.5,610.7676,492.5,614.7676,482.5,618.7676,486.5,614.7676" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="290.5" x2="488.5" y1="614.7676" y2="614.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="297.5" y="610.0254">world.authenticate_session()</text><polygon fill="#A80036" points="757,640.0781,767,644.0781,757,648.0781,761,644.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="763" y1="644.0781" y2="644.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="501.5" y="639.3359">GET Session Token</text><polygon fill="#A80036" points="505.5,669.3887,495.5,673.3887,505.5,677.3887,501.5,673.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="499.5" x2="768" y1="673.3887" y2="673.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="511.5" y="668.6465">OK: Mob Identifier</text><polygon fill="#A80036" points="301.5,698.6992,291.5,702.6992,301.5,706.6992,297.5,702.6992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="295.5" x2="493.5" y1="702.6992" y2="702.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="307.5" y="697.957">OK: Mob Identifier</text><polygon fill="#A80036" points="42.5,728.0098,32.5,732.0098,42.5,736.0098,38.5,732.0098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36.5" x2="289.5" y1="732.0098" y2="732.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="48.5" y="727.2676">OK: WebSocket Open</text><rect fill="#EEEEEE" filter="url(#f1brmavwx1yem9)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="854" x="3" y="760.665"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="857" y1="760.665" y2="760.665"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="857" y1="763.665" y2="763.665"/><rect fill="#EEEEEE" filter="url(#f1brmavwx1yem9)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="89" x="385.5" y="750.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="391.5" y="766.5781">Game Play</text><polygon fill="#A80036" points="278.5,800.6309,288.5,804.6309,278.5,808.6309,282.5,804.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31.5" x2="284.5" y1="804.6309" y2="804.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="38.5" y="799.8887">websocket.send(text)</text><polygon fill="#A80036" points="482.5,829.9414,492.5,833.9414,482.5,837.9414,486.5,833.9414" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="290.5" x2="488.5" y1="833.9414" y2="833.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="297.5" y="829.1992">world.command(text)</text><polygon fill="#A80036" points="301.5,859.252,291.5,863.252,301.5,867.252,297.5,863.252" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="295.5" x2="493.5" y1="863.252" y2="863.252"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="307.5" y="858.5098">Updates</text><polygon fill="#A80036" points="42.5,888.5625,32.5,892.5625,42.5,896.5625,38.5,892.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="36.5" x2="289.5" y1="892.5625" y2="892.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="48.5" y="887.8203">Updates</text><!--MD5=[3cf605e26e018ef635b8c4455ee69430]
@startuml auth-flow
skinparam ParticipantPadding 20
skinparam BoxPadding 10
skinparam SequenceBoxBackgroundColor #EEEEEE
skinparam SequenceBoxBorderColor #DDDDDD

actor Player as P

box Textcamp
participant "Web Server" as WS #99FF99
participant Core #99FF99
end box

participant "AWS SES" as SES
participant "AWS DynamoDB" as DBD

== Registration & Signin ==

P -> WS: GET /
WS - -> P: 200 index.html
P -> WS: POST /start-auth
WS -> Core: world.start_auth()
WS - -> P: 302 /?check-email
Core -> SES: OTP Link
SES - -> P: Email: OTP Link
P -> WS: GET /otp
WS -> Core: world.authenticate_otp()
Core -> DBD: PUT Session Token
DBD - -> Core: OK
Core - -> WS: OK: Session Token
WS - -> P: OK: Session Cookie + 302 /?welcome

== Session Start ==

P -> WS: GET / + Session Cookie
WS -> Core: world.authenticate_session()
Core -> DBD: GET Session Token
DBD -> Core: OK: Mob Identifier
Core - -> WS: OK: Mob Identifier
WS - -> P: OK: WebSocket Open

== Game Play ==

P -> WS: websocket.send(text)
WS -> Core: world.command(text)
Core - -> WS: Updates
WS - -> P: Updates
@enduml

PlantUML version 1.2020.15(Sun Jun 28 04:39:45 PDT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>